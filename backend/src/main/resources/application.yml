spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/invoiceme
    username: invoiceme
    password: invoiceme
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
    open-in-view: false
  flyway:
    enabled: true
  # Security Configuration
  # Credentials are loaded from environment variables:
  # - SPRING_SECURITY_USER_NAME (default: admin)
  # - SPRING_SECURITY_USER_PASSWORD (default: admin)
  security:
    user:
      name: ${SPRING_SECURITY_USER_NAME:admin}
      password: ${SPRING_SECURITY_USER_PASSWORD:admin}

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true

logging:
  level:
    root: INFO
    com.invoiceme: INFO
    com.invoiceme.shared.infrastructure.events.LoggingEventListener: INFO
    org.springframework: WARN
    org.hibernate: WARN
  pattern:
    # Structured logging pattern with MDC support
    # Format: timestamp | level | logger | MDC context | message
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} | %-5level | %logger{36} | [event.name=%mdc{event.name}, event.invoiceId=%mdc{event.invoiceId}, event.customerId=%mdc{event.customerId}, event.timestamp=%mdc{event.timestamp}] | %msg%n"
    # JSON format for AWS CloudWatch Logs (optional, can be enabled via profile)
    # Uncomment and use spring.profiles.active=cloudwatch to enable JSON logging
    # file: "%d{yyyy-MM-dd HH:mm:ss.SSS} | %-5level | %logger{36} | %msg%n"


